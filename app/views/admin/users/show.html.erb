<div class="container py-5 pt-5 mt-5">

  <!-- ユーザー情報 -->
  <div class="card shadow mb-4">
    <div class="card-body" style="background-color: #dee2e6;">
      <h3 class="card-title"><%= @user.name %></h3>
      <p class="mb-1"><strong>📧 メール:</strong> <%= @user.email %></p>
      <p class="mb-0"><strong>🤏 レベル:</strong> <%= @user.level_label %></p>
    </div>
  </div>



  <!-- 上位紹介者 -->
  <div class="card shadow mb-4">
    <div class="card-header bg-light">
      <h5 class="mb-0">👆 上位紹介者（紹介階層）</h5>
    </div>
    <div class="card-body">
      <% if @referrer_chain.present? %>
        <ul class="list-group list-group-flush">
          <% @referrer_chain.each_with_index do |ref, i| %>
            <li class="list-group-item">
              <span class="me-2 text-muted">#<%= i + 1 %>.</span>
              <strong><%= ref.name %></strong>（<%= ref.level_label %>）<br>
              📧 <%= ref.email %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-muted mb-0">紹介者なし</p>
      <% end %>
    </div>
  </div>

  <!-- 下位紹介者 -->
  <div class="card shadow">
    <div class="card-header bg-light">
      <h5 class="mb-0">👇 下位紹介者</h5>
    </div>
    <div class="card-body">
      <% if @user.referrals.any? %>
        <%= render partial: 'admin/users/referral_tree', locals: { referrals: @user.referrals } %>
      <% else %>
        <p class="text-muted mb-0">下位紹介者なし</p>
      <% end %>
    </div>
  </div>

  <% if @user.referrer.present? %>
    <%= link_to "🔙 一つ上位に戻る", admin_user_path(@user.referrer), class: "btn btn-outline-secondary mt-4" %>
  <% else %>
    <%= link_to "🏠 管理者メニューに戻る", admin_root_path, class: "btn btn-outline-secondary mt-4" %>
  <% end %>



</div>
